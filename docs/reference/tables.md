# テーブル一覧

JRVLTSQLが管理する64テーブルの一覧です。

## NL_テーブル（蓄積系）: 38テーブル

レース終了後に確定するデータを格納します。

### レース関連

| テーブル | 説明 |
|---------|------|
| NL_RA | レース詳細情報 |
| NL_SE | 馬毎レース情報 |
| NL_HR | 払戻情報 |
| NL_H1 | 払戻詳細（単勝〜三連複） |
| NL_H6 | 三連単払戻 |
| NL_TK | 登録馬情報 |
| NL_YS | 開催スケジュール |
| NL_WF | WIN5情報 |
| NL_RC | レコード情報 |

### オッズ関連

| テーブル | 説明 |
|---------|------|
| NL_O1 | 単勝・複勝・枠連オッズ |
| NL_O2 | 馬連オッズ |
| NL_O3 | ワイドオッズ |
| NL_O4 | 馬単オッズ |
| NL_O5 | 三連複オッズ |
| NL_O6 | 三連単オッズ |

### マスタデータ

| テーブル | 説明 |
|---------|------|
| NL_UM | 馬マスタ |
| NL_KS | 騎手マスタ |
| NL_CH | 調教師マスタ |
| NL_BN | 馬主マスタ |
| NL_BR | 生産者マスタ |
| NL_BT | 血統マスタ |
| NL_HN | 繁殖馬マスタ |
| NL_SK | 産駒マスタ |
| NL_CS | コースマスタ |
| NL_HC | 調教師成績履歴 |
| NL_HY | 馬名履歴 |

### 変更・取消情報

| テーブル | 説明 |
|---------|------|
| NL_JG | 出走取消情報 |
| NL_JC | 騎手変更情報 |
| NL_TC | 発走時刻変更 |
| NL_CC | コース変更情報 |

### 天候・馬場

| テーブル | 説明 |
|---------|------|
| NL_WE | 天候馬場状態 |
| NL_WH | 馬体重情報 |

### その他

| テーブル | 説明 |
|---------|------|
| NL_CK | 競走馬情報（成績詳細） |
| NL_TM | タイムマスタ |
| NL_DM | データマイニング情報 |
| NL_WC | 調教情報 |
| NL_AV | 市場取引情報 |
| NL_HS | 馬主履歴 |

## RT_テーブル（速報系）: 20テーブル

レース当日のリアルタイムデータを格納します。

| テーブル | 説明 |
|---------|------|
| RT_RA | レース詳細（速報） |
| RT_SE | 馬毎レース情報（速報） |
| RT_HR | 払戻情報（速報） |
| RT_H1 | 払戻詳細（速報） |
| RT_H6 | 三連単払戻（速報） |
| RT_O1 | 単勝・複勝オッズ（速報） |
| RT_O2 | 馬連オッズ（速報） |
| RT_O3 | ワイドオッズ（速報） |
| RT_O4 | 馬単オッズ（速報） |
| RT_O5 | 三連複オッズ（速報） |
| RT_O6 | 三連単オッズ（速報） |
| RT_CC | コース変更（速報） |
| RT_JC | 騎手変更（速報） |
| RT_TC | 発走時刻変更（速報） |
| RT_RC | 騎手変更情報（速報） |
| RT_TM | タイムマスタ（速報） |
| RT_DM | データマイニング（速報） |
| RT_WE | 天候馬場（速報） |
| RT_WH | 馬体重（速報） |
| RT_AV | 市場取引（速報） |

## TS_テーブル（時系列）: 6テーブル

オッズの時間推移を記録します。

| テーブル | 説明 |
|---------|------|
| TS_O1 | 単勝・複勝オッズ（時系列） |
| TS_O2 | 馬連オッズ（時系列） |
| TS_O3 | ワイドオッズ（時系列） |
| TS_O4 | 馬単オッズ（時系列） |
| TS_O5 | 三連複オッズ（時系列） |
| TS_O6 | 三連単オッズ（時系列） |

## テーブル間のリレーション

### レース→馬毎レース情報

```sql
SELECT r.Hondai, s.Bamei, s.KakuteiJyuni
FROM NL_RA r
JOIN NL_SE s ON
    r.Year = s.Year AND
    r.MonthDay = s.MonthDay AND
    r.JyoCD = s.JyoCD AND
    r.Kaiji = s.Kaiji AND
    r.Nichiji = s.Nichiji AND
    r.RaceNum = s.RaceNum
WHERE r.Year = 2024 AND r.RaceNum = 11;
```

### 馬毎レース情報→馬マスタ

```sql
SELECT s.*, u.BameiKana, u.BirthDate
FROM NL_SE s
JOIN NL_UM u ON s.KettoNum = u.KettoNum
WHERE s.Year = 2024;
```

### 馬毎レース情報→騎手マスタ

```sql
SELECT s.Bamei, k.KisyuName, s.KakuteiJyuni
FROM NL_SE s
JOIN NL_KS k ON s.KisyuCode = k.KisyuCode
WHERE s.Year = 2024 AND s.RaceNum = 11;
```

## データ量の目安

| テーブル | 年間レコード数（目安） |
|---------|----------------------|
| NL_RA | 約3,500件 |
| NL_SE | 約50,000件 |
| NL_O1 | 約50,000件 |
| NL_UM | 約10,000件（累計） |
| NL_KS | 約150件（累計） |

## スキーマ詳細

各テーブルの詳細なスキーマ定義は[スキーマ定義](../api/schema.md)を参照してください。
